<blocks app="Snap! 6, https://snap.berkeley.edu" version="1"><block-definition s="custom dialog, title %&apos;title&apos; costume %&apos;cst&apos; body %&apos;body&apos; $nl button names %&apos;variadic&apos; on button clicks %&apos;cvariadic&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%obj"></input><input type="%mlt"></input><input type="%mult%txt"></input><input type="%mult%cmdRing"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>title,body,names,actions,cst,proc</l></list><l> function txt(textString) {&#xD;        var tm = new TextMorph(&#xD;                textString,&#xD;                box.fontSize,&#xD;                box.fontStyle,&#xD;                true,&#xD;                false,&#xD;                &apos;center&apos;,&#xD;                null,&#xD;                null,&#xD;                MorphicPreferences.isFlat ? null : new Point(1, 1),&#xD;                WHITE&#xD;            ),&#xD;            scroller,&#xD;            maxHeight = world.height() - box.titleFontSize * 20;&#xD;        if (tm.height() &gt; maxHeight) {&#xD;            scroller = new ScrollFrameMorph();&#xD;            scroller.acceptsDrops = false;&#xD;            scroller.contents.acceptsDrops = false;&#xD;            scroller.bounds.setWidth(tm.width());&#xD;            scroller.bounds.setHeight(maxHeight);&#xD;            scroller.addContents(tm);&#xD;            scroller.color = new Color(0, 0, 0, 0);&#xD;            return scroller;&#xD;        }&#xD;        return tm;&#xD;    }&#xD;&#xD;names = names.asArray();&#xD;let scs = actions.asArray();&#xD;console.log( scs);&#xD;actions = actions.asArray().map(_=&gt;function doAction(){if(doAction.e==&apos;close&apos;){this.destroy();}else{invoke(doAction.e,new List());this.destroy()}});&#xD;actions.forEach((e,f)=&gt;{e.e=scs[f];e.f=proc})&#xD;var box = new DialogBoxMorph();&#xD;box.labelString = title;&#xD;box.createLabel();&#xD;box.label.isBold = true;&#xD;if(cst?.contents){&#xD;  box.setPicture( cst.contents);&#xD;};&#xD;box.addBody(txt( body));&#xD;box.body.fixLayout();&#xD;names.forEach((e, f) =&gt; {&#xD;box.addButton(actions[f], e);&#xD;})&#xD;box.fixLayout();&#xD;box.popUp(this.world());</l></block><list><block var="title"/><block var="body"/><block var="variadic"/><block var="cvariadic"/><block var="cst"/></list></block></script></block-definition></blocks>
